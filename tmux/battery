#!/bin/bash
if [ `uname` = 'Darwin' ] ; then
  battery_status=`pmset -g batt`
  percent=`echo $battery_status | egrep "([0-9]+\%).*" -o --colour=auto | cut -f1 -d";"`
  power_source=`echo $battery_status | egrep "'(.*) Power'" -o`
fi

case $power_source in 
  "'Battery Power'"*)
    battery_icon=ðŸ”‹
    ;;
  "'AC Power'"*)
    battery_icon=âš¡ï¸
    ;;
  *)
    battery_icon=ðŸ”¥
esac

if (( ${percent%?} > 70 )); then 
    bg_colour='colour2'
elif (( ${percent%?} > 20 )); then 
    bg_colour='colour3'
else 
    bg_colour='colour1'
    battery_icon=ðŸ’€
fi
echo "#[fg=$bg_colour]î‚²#[bg=$bg_colour,fg=colour16]$battery_icon $percent #[fg=colour5,bg=$bg_colour]î‚²"
